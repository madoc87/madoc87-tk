<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog</title>
    <link rel="stylesheet" href="src/css/dracula.css">
    <link rel="stylesheet" type="text/css" href="src/css/style.css" />
    <link rel="stylesheet" type="text/css" href="blog/style-blog.css">
    <link rel="icon" type="image/x-icon" href="src/img/favicon.png">
    <script src="https://kit.fontawesome.com/bec82f77f4.js" crossorigin="anonymous"></script>
</head>

<body>
    <div class="top-header">
        <div class="icons">
            <a href="https://github.com/madoc87" target="_blank" class="fa-brands fa-github"></a>
            <a href="mailto:fabricio.r.assis@gmail.com" target="_blank" class="fa-solid fa-envelope"></a>
            <a href="https://www.linkedin.com/in/fabricio-assis" target="_blank" class="fa-brands fa-linkedin"></a>
            <a href="curriculo.html" target="_blank"
                class="fa-solid fa-id-card"></a>
        </div>
    </div>

    <header class="header">
        <img class="logo" alt="Logo" style="width: 5%;" src="src/img/logo_madoc87_v1.png">
        <nav class="menu">
            <ul>
                <a href="index.html">Home</a>
                <a href="index.html#servers">Servidores</a>
                <a href="blog-list.html">Blog</a>
                <a href="index.html#contato">Contato</a>
                <a href="devlink/index.html">DevLinks</a>
                <a href="https://madoc87.github.io/portfolio/">Portfolio</a>
            </ul>
        </nav>
    </header>
    <main>
        <h1 class="cabecalho-titulo">Blog</h1>
        <section id="conteudo-principal"></section>
        <aside id="barra-lateral"></aside>
        <div class="container centralizar">
            <hr><br>
            <button class="botao-footer" onclick="window.location.href='blog-list.html'">Voltar Lista do Blog</button>
            <button class="botao-footer" onclick="window.location.href='index.html'">Voltar para Home</button>
        </div>
    </main>
    <footer>
        <p>Copyright &copy; <span id="ano"> </p>
    </footer>
</body>



<script>
    //Script para carregamento dinamico do conteudo
    document.addEventListener("DOMContentLoaded", function () {

        // Função para obter o valor do parâmetro 'postagem' da URL
        function getQueryParam(param) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }

        const postagemNome = getQueryParam('postagem') || 'postagem-1'; // Padrão para 'postagem-1.html' se nenhum parâmetro for fornecido
        const container = document.getElementById("conteudo-principal");

        // Função para carregar a postagem
        // function carregarPostagem() {
        //     fetch(`blog/${postagemNome}.html`)
        //         .then(response => response.text())
        //         .then(html => container.innerHTML = html)
        //         .catch(err => console.log('Erro ao carregar a postagem:', err));
        // }

        function carregarPostagem() {
            fetch(`blog/${postagemNome}.html`)
                .then(response => response.text())
                .then(html => {
                    container.innerHTML = html;
                    // Depois que o conteúdo for inserido, chamamos o highlightAll para aplicar os estilos aos códigos
                    hljs.highlightAll(); 
                })
                .catch(err => console.log('Erro ao carregar a postagem:', err));
        }

        // Carrega a postagem ao carregar a página
        carregarPostagem();
    });






    //Script para pagina não carregar antes dos estilos CSS
    document.addEventListener("DOMContentLoaded", function () {

        var link1 = document.createElement("link");
        link1.rel = "stylesheet";
        link1.href = "blog/style-blog.css";

        document.head.appendChild(link1);

        var link2 = document.createElement("link");
        link2.rel = "stylesheet";
        link2.href = "src/css/style.css";
        document.head.appendChild(link2);
    });










    function copyCode(buttonElement) {
    // Localiza o elemento parente mais próximo que contém o exemplo de código e o botão copiar
    const codeExampleParent = buttonElement.closest('.code-example');
  
    // Encontra o elemento <code> dentro desse elemento parente
    const codeSnippet = codeExampleParent.querySelector('pre code');
  
    // Cria um objeto Range e seleciona o texto dentro do elemento <code>
    const range = document.createRange();
    range.selectNodeContents(codeSnippet);
  
    // Cria uma Selection e adiciona o range a ela
    const selection = window.getSelection();
    selection.removeAllRanges();
    selection.addRange(range);
  
    try {
        // Tenta executar o comando de copiar
        const successful = document.execCommand('copy');
        if(successful) {
            console.log('Código copiado com sucesso!');
        } else {
            console.error('Falha ao copiar código.');
        }
    } catch (err) {
        console.error('Erro ao copiar o código:', err);
    }
  
    // Remove a seleção após copiar
    selection.removeAllRanges();
  
    // Exibe a mensagem de cópia bem-sucedida
    const messageElement = codeExampleParent.querySelector('#mensagemCopiada');
    messageElement.classList.remove('visually-hidden');
    messageElement.innerText = "Código copiado!";
    setTimeout(function () {
        messageElement.innerText = "";
        messageElement.classList.add('visually-hidden');
    }, 2000); // Oculta a mensagem após 2 segundos
}

















    //Script para mostrar o ano atual
    const anoAtual = new Date().getFullYear();
    document.getElementById("ano").innerHTML = anoAtual;

</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.0.1/highlight.min.js"></script>
<!-- <script>hljs.highlightAll();</script> -->

</html>